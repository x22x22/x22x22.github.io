<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‘é‡æ¨¡å‹é‡åŒ–æ€§èƒ½å¯¹æ¯”æµ‹è¯•ç»“æœ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background-color: #f8f9fa;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .summary {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .model-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin: 2rem 0;
        }
        
        .model-card {
            background: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 4px solid #667eea;
        }
        
        .model-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: #333;
        }
        
        .comparison-result {
            margin: 0.5rem 0;
            padding: 0.5rem;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .comparison-result.better {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
        }
        
        .comparison-result.worse {
            background-color: #f8d7da;
            border: 1px solid #f5c6cb;
        }
        
        .comparison-result.similar {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
        }
        
        .score {
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }
        
        .controls {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 2rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .control-group {
            margin: 1rem 0;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
        }
        
        .control-group select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .detail-results {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            margin: 2rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: none;
        }
        
        .highlight {
            background-color: #fff3cd;
            padding: 1rem;
            border-left: 4px solid #ffc107;
            margin: 1rem 0;
        }
        
        .conclusion {
            background: white;
            color: #333;
            padding: 2rem;
            border-radius: 10px;
            margin: 2rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 4px solid #6f42c1;
        }
        
        .conclusion h3 {
            color: #6f42c1;
            margin-top: 0;
        }
        
        .language-switcher {
            position: fixed;
            top: 20px;
            right: max(20px, calc((100vw - 1400px) / 2 + 20px));
            z-index: 1000;
            display: flex;
            gap: 10px;
        }
        
        @media (max-width: 1440px) {
            .language-switcher {
                right: 20px;
            }
        }
        
        .language-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .language-btn:hover {
            background: #667eea;
            color: white;
        }
        
        .language-btn.active {
            background: #667eea;
            color: white;
        }
        
        .performance-impact {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .impact-none {
            background-color: #c8f7c5;
            color: #0f5132;
        }
        
        .impact-minimal {
            background-color: #d4edda;
            color: #155724;
        }
        
        .impact-moderate {
            background-color: #fff3cd;
            color: #856404;
        }
        
        .impact-significant {
            background-color: #ffeaa7;
            color: #6c5500;
        }
        
        .impact-severe {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .loading {
            text-align: center;
            padding: 2rem;
            color: #666;
        }
    </style>
  </head>
<body>
    <div class="language-switcher">
        <button class="language-btn active" onclick="switchLanguage('en')">EN</button>
        <button class="language-btn" onclick="switchLanguage('zh')">ä¸­æ–‡</button>
    </div>
    
    <div class="header">
        <h1 data-i18n="page.title">å‘é‡æ¨¡å‹é‡åŒ–æ€§èƒ½å¯¹æ¯”æµ‹è¯•ç»“æœ</h1>
        <p data-i18n="page.subtitle">è¯„ä¼°ä¸åŒé‡åŒ–æŠ€æœ¯å¯¹å‘é‡åµŒå…¥æ¨¡å‹æ€§èƒ½çš„å½±å“</p>
    </div>

    <div style="background: #f8f9fa; border-left: 4px solid #667eea; padding: 1rem; margin: 1.5rem 0; border-radius: 6px;">
        <h4 style="margin-top: 0; color: #667eea; display: flex; align-items: center;">
            ğŸ“š <span style="margin-left: 0.5rem;" data-i18n="dataset.title">æ•°æ®é›†ä¸è¯„ä¼°æ¡†æ¶</span>
        </h4>
        <p style="margin-bottom: 0.5rem;">
            <strong data-i18n="dataset.source.label">æ•°æ®é›†æ¥æºï¼š</strong> 
            <span data-i18n="dataset.source.desc">åŸºäº</span> <a href="https://huggingface.co/datasets/dwzhu/LongEmbed" target="_blank" style="color: #667eea;">LongEmbed</a> <span data-i18n="dataset.source.desc2">æ•°æ®é›†è¿›è¡Œé•¿æ–‡æœ¬å‘é‡åµŒå…¥æ€§èƒ½è¯„ä¼°</span>
        </p>
        <p style="margin-bottom: 0.5rem;">
            <strong data-i18n="evaluation.script.label">è¯„ä¼°è„šæœ¬ï¼š</strong> 
            <span data-i18n="evaluation.script.desc">åŸºäºåŸå§‹</span> <a href="https://github.com/dwzhu-pku/LongEmbed" target="_blank" style="color: #667eea;">LongEmbed</a> <span data-i18n="evaluation.script.desc2">æ¡†æ¶è¿›è¡Œè°ƒæ•´ï¼Œæ”¯æŒOpenAIå…¼å®¹æ¥å£ã€‚</span> 
            <a href="https://github.com/x22x22/LongEmbed/tree/feature/add-openai-embedding-support" target="_blank" style="color: #667eea;" data-i18n="evaluation.script.link">æŸ¥çœ‹è°ƒæ•´åçš„è¯„ä¼°è„šæœ¬</a>
        </p>
                    <p style="margin-bottom: 0;">
                <strong data-i18n="model.format.label">æ¨¡å‹æ ¼å¼ï¼š</strong> 
                <span data-i18n="model.format.desc">åŒ…å«åŸç”ŸHuggingFaceæ ¼å¼(vLLMè¿è¡Œ)å’ŒGGUFé‡åŒ–æ ¼å¼(ollamaè¿è¡Œ)ä¸¤ç§ç±»å‹ï¼Œæä¾›å®Œæ•´çš„æ¨¡å‹æ€§èƒ½åŸºå‡†å¯¹æ¯”</span>
            </p>
    </div>

    <div class="summary">
        <h2 data-i18n="summary.title">ğŸ“Š é‡åŒ–æ€§èƒ½å¯¹æ¯”æ±‡æ€»</h2>
        <p data-i18n="summary.description">æœ¬ç ”ç©¶å¯¹æ¯”äº†å¤šä¸ªä¸»æµå‘é‡åµŒå…¥æ¨¡å‹åœ¨ä¸åŒé‡åŒ–ç²¾åº¦ä¸‹çš„æ€§èƒ½è¡¨ç°ï¼Œæ¶µç›–BGE-M3ã€Qwen3-Embeddingå’ŒMultilingual-E5-Largeä¸‰å¤§ç³»åˆ—æ¨¡å‹ã€‚</p>
        
        <div class="highlight">
            <strong data-i18n="summary.metrics.label">è¯„ä¼°æŒ‡æ ‡ï¼š</strong> <span data-i18n="summary.metrics.description">ä½¿ç”¨ ndcg_at_10 æŒ‡æ ‡è¡¡é‡æ¨¡å‹æ€§èƒ½ï¼Œåˆ†åˆ«åœ¨ LEMBNeedleRetrieval å’Œ LEMBPasskeyRetrieval ä»»åŠ¡ä¸Šè¿›è¡Œæµ‹è¯•ã€‚</span>
        </div>

        <div style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; padding: 1.5rem; border-radius: 10px; margin: 1rem 0;">
                            <h4 style="margin-top: 0; display: flex; align-items: center;">
                    ğŸ¯ <span style="margin-left: 0.5rem;" data-i18n="highlight.title">å…³é”®å‘ç°ï¼šæŠ€æœ¯æ ˆç»„åˆå¯¹æ€§èƒ½çš„çœŸå®å½±å“</span>
                </h4>
                <p style="margin-bottom: 1rem;">
                    <strong data-i18n="highlight.finding1">âš ï¸ é‡å¤§å‘ç° - GGUFæŠ€æœ¯æ ˆvs HF+vLLMæŠ€æœ¯æ ˆæ€§èƒ½å·®å¼‚ï¼š</strong><span data-i18n="highlight.finding1.desc">GGUFæ ¼å¼+Ollamaç›¸å¯¹äºHFæ ¼å¼+vLLMç»„åˆåœ¨ä¸­é•¿æ–‡æœ¬åœºæ™¯ä¸‹å‡ºç°æ˜¾è‘—æ€§èƒ½ä¸‹æ»‘</span>
                    <br>â€¢ <strong data-i18n="highlight.range.short">çŸ­æ–‡æœ¬å½±å“:</strong> åŸºæœ¬æ— æŸï¼ŒMultilingual-E5-Largeç”šè‡³æå‡10.1%
                    <br>â€¢ <strong data-i18n="highlight.range.medium">ä¸­ç­‰é•¿åº¦æ–‡æœ¬æŸå¤±:</strong> Multilingual-E5-Largeä¸‹é™61.2%ï¼ŒQwen3-4Bå¾®å¹…ä¸‹é™0.9%ï¼ŒQwen3-0.6Bè½»å¾®æå‡3.3%
                    <br>â€¢ <strong data-i18n="highlight.range.long">é•¿æ–‡æœ¬é‡å¤§æŸå¤±:</strong> Multilingual-E5-Largeä¸‹é™90.2%ï¼ŒQwen3-0.6Bä¸‹é™51.4%ï¼ŒQwen3-4Bä¸‹é™64.5%
                    <br>â€¢ <strong style="color: #d63384;">å…³é”®è­¦å‘Š:</strong> GGUFæŠ€æœ¯æ ˆåœ¨é•¿æ–‡æœ¬æ£€ç´¢åœºæ™¯ä¸‹å­˜åœ¨æ˜¾è‘—æ€§èƒ½åŠ£åŠ¿
                    <br><br><strong data-i18n="highlight.finding2">2. GGUFå†…éƒ¨é‡åŒ–æŠ€æœ¯ç›¸å¯¹ç¨³å®šï¼š</strong><span data-i18n="highlight.finding2.desc">åœ¨GGUFæ ¼å¼å†…éƒ¨çš„é‡åŒ–æ“ä½œå½±å“å¯æ§</span>
                    <br>â€¢ <strong>BGE-M3é‡åŒ–é“¾è·¯:</strong> FP16â†’Q8_0å®Œå…¨æ— æŸï¼ŒQ8_0â†’Q4_K_Måœ¨çŸ­ä¸­ç­‰é•¿åº¦æ–‡æœ¬ç”šè‡³æå‡æ€§èƒ½
                    <br>â€¢ <strong>Qwen3-0.6Bé‡åŒ–:</strong> F16â†’Q8_0å½±å“è½»å¾®(æœ€å¤§-4.8%)ï¼ŒQ8_0â†’Q4_K_Mç¨³å®šæ€§è‰¯å¥½
                    <br>â€¢ <strong>Qwen3-4Bé‡åŒ–:</strong> F16â†’Q8_0å½±å“æå°(æœ€å¤§-2.2%)ï¼Œåœ¨é•¿æ–‡æœ¬ä¸Šä¿æŒç¨³å®š
                    <br>â€¢ <strong>é‡åŒ–ä¼˜åŠ¿:</strong> GGUFå†…éƒ¨é‡åŒ–ä¸ä¼šé¢å¤–æ¶åŒ–é•¿æ–‡æœ¬æ€§èƒ½
                    <br><br><strong data-i18n="highlight.finding3">3. æ¨¡å‹æ¶æ„å·®å¼‚åŒ–è¡¨ç°æ˜æ˜¾ï¼š</strong><span data-i18n="highlight.finding3.desc">ä¸åŒæ¨¡å‹åœ¨ä¸¤ç§æŠ€æœ¯æ ˆé—´çš„æ€§èƒ½å·®å¼‚å­˜åœ¨æ˜¾è‘—åŒºåˆ«</span>
                    <br>â€¢ <strong>æŠ€æœ¯æ ˆé€‚åº”æ€§æ’åº:</strong> Qwen3-4B(ä¸­ç­‰é•¿åº¦æ–‡æœ¬) > Qwen3-0.6B > Multilingual-E5-Large
                    <br>â€¢ <strong>Qwen3ç³»åˆ—ä¼˜åŠ¿:</strong> åœ¨ä¸­ç­‰é•¿åº¦æ–‡æœ¬åœºæ™¯ä¸‹GGUFæŠ€æœ¯æ ˆæ€§èƒ½æŸå¤±ç›¸å¯¹å¯æ§
                    <br>â€¢ <strong>Multilingual-E5-LargeåŠ£åŠ¿:</strong> åœ¨GGUFæŠ€æœ¯æ ˆä¸‹é•¿æ–‡æœ¬æŸå¤±ä¸¥é‡ï¼Œä½†çŸ­æ–‡æœ¬åè€Œæå‡
                    <br>â€¢ <strong>BGE-M3çº¯GGUF:</strong> æœªæä¾›HFåŸç”Ÿç‰ˆæœ¬ï¼Œæ— æ³•è¯„ä¼°æŠ€æœ¯æ ˆå·®å¼‚
                    <br><br><strong data-i18n="highlight.finding4">4. é•¿æ–‡æœ¬å¤„ç†æ˜¯å…³é”®æŠ€æœ¯æ ˆé€‰æ‹©å› ç´ ï¼š</strong><span data-i18n="highlight.finding4.desc">GGUFæŠ€æœ¯æ ˆåœ¨é•¿æ–‡æœ¬æ£€ç´¢åœºæ™¯ä¸‹å­˜åœ¨ç³»ç»Ÿæ€§åŠ£åŠ¿</span>
                    <br>â€¢ <strong>é•¿æ–‡æœ¬é‡ç¾åŒº:</strong> æ‰€æœ‰æ¨¡å‹åœ¨GGUFæŠ€æœ¯æ ˆä¸‹8K-32Kæ–‡æœ¬é•¿åº¦å‡å‡ºç°50%ä»¥ä¸Šæ€§èƒ½ä¸‹é™
                    <br>â€¢ <strong>ä¸šåŠ¡é£é™©è¯„ä¼°:</strong> é•¿æ–‡æœ¬æ£€ç´¢åœºæ™¯ä¸‹GGUFæŠ€æœ¯æ ˆå­˜åœ¨ä¸å¯æ¥å—çš„æ€§èƒ½æŸå¤±
                    <br>â€¢ <strong>æŠ€æœ¯æ ˆé€‰æ‹©:</strong> é•¿æ–‡æœ¬åº”ç”¨å¼ºçƒˆå»ºè®®ä½¿ç”¨HF+vLLMæŠ€æœ¯æ ˆ
                    <br>â€¢ <strong>GGUFé€‚ç”¨åœºæ™¯:</strong> ä¸»è¦é€‚åˆçŸ­ä¸­ç­‰é•¿åº¦æ–‡æœ¬åº”ç”¨ï¼Œé•¿æ–‡æœ¬åœºæ™¯éœ€è°¨æ…è¯„ä¼°
                </p>
        </div>

        <div id="modelResults" class="model-grid"></div>
    </div>

    <div class="conclusion">
        <h3 data-i18n="conclusion.title">ğŸ¯ é‡åŒ–æŠ€æœ¯å®ç”¨æ€§åˆ†æä¸å»ºè®®</h3>
        
        <div style="background: rgba(40, 167, 69, 0.1); border: 2px solid #28a745; border-radius: 8px; padding: 1rem; margin: 1rem 0;">
            <h4 style="color: #28a745; margin-top: 0;" data-i18n="conclusion.breakthrough.title">ğŸŒŸ æ ¸å¿ƒç»“è®ºï¼šé‡åŒ–æŠ€æœ¯å·²è¾¾åˆ°å·¥ä¸šçº§æ ‡å‡†</h4>
            <p style="margin-bottom: 0;">
                <span data-i18n="conclusion.breakthrough.description">å®Œæ•´æµ‹è¯•æ•°æ®è¯å®ï¼š<strong>é‡åŒ–æŠ€æœ¯å·²è¾¾åˆ°å·¥ä¸šçº§éƒ¨ç½²æ ‡å‡†</strong>ã€‚Multilingual-E5-Large å³ä½¿åœ¨æœ€æ¿€è¿›çš„Q4_K_Mé‡åŒ–ä¸‹æŸå¤±ä¹Ÿä»…3.9%ï¼Œå½»åº•æ‰“ç ´äº†"é‡åŒ–å¿…ç„¶å¤§å¹…é™æ€§èƒ½"çš„è¯¯åŒºã€‚è¿™ä¸ºä¼ä¸šçº§AIåº”ç”¨çš„å¤§è§„æ¨¡ã€ä½æˆæœ¬éƒ¨ç½²æ‰«æ¸…äº†æŠ€æœ¯éšœç¢ã€‚</span>
            </p>
        </div>
        
        <h4 data-i18n="conclusion.differences.title">é‡åŒ–æŠ€æœ¯å…¨æ™¯å½±å“è¯„ä¼°</h4>
        <p data-i18n="conclusion.differences.intro">åŸºäºå®Œæ•´é‡åŒ–é“¾è·¯æµ‹è¯•ï¼Œä¸åŒçº§åˆ«é‡åŒ–çš„çœŸå®å½±å“ï¼š</p>
        <ul>
            <li><strong data-i18n="conclusion.differences.point1.title">ä¿å®ˆé‡åŒ–(F32â†’F16â†’Q8_0)ï¼š</strong> <span data-i18n="conclusion.differences.point1.desc">æ‰€æœ‰æ¨¡å‹è¡¨ç°ä¼˜å¼‚ï¼ŒMultilingual-E5-Largeå®Œå…¨æ— æŸï¼Œå¯ä½œä¸ºç”Ÿäº§é¦–é€‰</span></li>
            <li><strong data-i18n="conclusion.differences.point2.title">æ¿€è¿›é‡åŒ–(Q4_K_M)ï¼š</strong> <span data-i18n="conclusion.differences.point2.desc">Multilingual-E5-Largeä»…æŸå¤±3.9%æ ‘ç«‹æ–°æ ‡æ†ï¼ŒBGE-M3æ³¢åŠ¨è¾ƒå¤§ï¼ŒQwen3-4BæŸå¤±13.3%éœ€è¦æƒè¡¡</span></li>
            <li><strong data-i18n="conclusion.differences.point3.title">é•¿æ–‡æœ¬åœºæ™¯ç‰¹æ®Šæ€§ï¼š</strong> <span data-i18n="conclusion.differences.point3.desc">æ‰€æœ‰æ¨¡å‹åŸºç¡€æ€§èƒ½åä½ï¼Œä½†Multilingual-E5-Largeåœ¨é‡åŒ–æ–¹é¢è¡¨ç°æœ€ç¨³å®š</span></li>
        </ul>
        
                        <h4 data-i18n="conclusion.effectiveness.title">æŠ€æœ¯æ ˆé€‰æ‹©å†³ç­–çŸ©é˜µ</h4>
                <p data-i18n="conclusion.effectiveness.intro">åŸºäºæ ¼å¼è½¬æ¢ä¸é‡åŒ–æŠ€æœ¯çš„çœŸå®å½±å“ï¼Œå»ºç«‹åº”ç”¨åœºæ™¯å¯¼å‘çš„æŠ€æœ¯æ ˆé€‰æ‹©æ ‡å‡†ï¼š</p>
                <ul>
                    <li><strong data-i18n="conclusion.effectiveness.point1.title">ğŸ¯ é•¿æ–‡æœ¬åº”ç”¨ï¼ˆ8K-32Kï¼‰- å¼ºåˆ¶HFåŸç”Ÿï¼š</strong> <span data-i18n="conclusion.effectiveness.point1.desc">GGUFæ ¼å¼åœ¨é•¿æ–‡æœ¬åœºæ™¯ä¸‹å­˜åœ¨50%-90%æ€§èƒ½æŸå¤±ï¼Œä¸å¯æ¥å—ã€‚å¿…é¡»ä½¿ç”¨HF+vLLMæŠ€æœ¯æ ˆ</span></li>
                    <li><strong data-i18n="conclusion.effectiveness.point2.title">âš–ï¸ ä¸­ç­‰é•¿åº¦æ–‡æœ¬åº”ç”¨ï¼ˆ1K-4Kï¼‰- éœ€æƒè¡¡é€‰æ‹©ï¼š</strong> <span data-i18n="conclusion.effectiveness.point2.desc">Qwen3ç³»åˆ—åœ¨GGUFè½¬æ¢ä¸­æŸå¤±å¯æ§(0.9%-3.3%)ï¼ŒMultilingual-E5-LargeæŸå¤±è¾ƒå¤§(61.2%)ã€‚å»ºè®®Qwen3å¯ç”¨GGUFï¼ŒE5-Largeä¿æŒHF</span></li>
                    <li><strong data-i18n="conclusion.effectiveness.point3.title">âœ… çŸ­æ–‡æœ¬åº”ç”¨ï¼ˆ256-512ï¼‰- GGUFå‹å¥½ï¼š</strong> <span data-i18n="conclusion.effectiveness.point3.desc">æ‰€æœ‰æ¨¡å‹åœ¨çŸ­æ–‡æœ¬åœºæ™¯ä¸‹GGUFè½¬æ¢æ— æŸç”šè‡³æå‡ï¼Œå¯æ”¾å¿ƒä½¿ç”¨GGUF+é‡åŒ–æŠ€æœ¯æ ˆ</span></li>
                    <li><strong data-i18n="conclusion.effectiveness.point4.title">ğŸ”§ GGUFå†…éƒ¨é‡åŒ–ç­–ç•¥ä¼˜åŒ–ï¼š</strong> <span data-i18n="conclusion.effectiveness.point4.desc">åœ¨ç¡®å®šä½¿ç”¨GGUFçš„åœºæ™¯ä¸‹ï¼ŒF16â†’Q8_0â†’Q4_K_Mé‡åŒ–é“¾è·¯å½±å“å¯æ§ï¼Œå¯æ ¹æ®èµ„æºéœ€æ±‚é€‰æ‹©é‡åŒ–çº§åˆ«</span></li>
                </ul>
                
                <h4 data-i18n="conclusion.recommendation.title">åŸºäºåº”ç”¨åœºæ™¯çš„éƒ¨ç½²å†³ç­–æŒ‡å—</h4>
                <p><strong style="color: #d63384;" data-i18n="conclusion.recommendation.stance">æ ¼å¼é€‰æ‹©æ¯”é‡åŒ–çº§åˆ«æ›´å…³é”®</strong><span data-i18n="conclusion.recommendation.intro">ï¼š</span></p>
                <ol>
                    <li><strong data-i18n="conclusion.recommendation.point1.title">é•¿æ–‡æœ¬æ£€ç´¢ç³»ç»Ÿï¼ˆRAG/æ–‡æ¡£åˆ†æï¼‰ï¼š</strong> <span data-i18n="conclusion.recommendation.point1.desc">å¼ºåˆ¶HF+vLLMï¼Œæ¨èMultilingual-E5-Large FP32æˆ–Qwen3-4B BF16ï¼Œç¡®ä¿é•¿æ–‡æœ¬æ£€ç´¢èƒ½åŠ›</span></li>
                    <li><strong data-i18n="conclusion.recommendation.point2.title">æ··åˆé•¿åº¦åº”ç”¨ï¼ˆæœç´¢/æ¨èï¼‰ï¼š</strong> <span data-i18n="conclusion.recommendation.point2.desc">HF+vLLMä¼˜å…ˆï¼Œå¦‚èµ„æºå—é™å¯è€ƒè™‘Qwen3ç³»åˆ—+GGUF F16ï¼Œé¿å…E5-Largeè½¬GGUF</span></li>
                    <li><strong data-i18n="conclusion.recommendation.point3.title">çŸ­æ–‡æœ¬å¯†é›†å‹ï¼ˆåˆ†ç±»/åŒ¹é…ï¼‰ï¼š</strong> <span data-i18n="conclusion.recommendation.point3.desc">GGUFæŠ€æœ¯æ ˆå®Œå…¨é€‚ç”¨ï¼Œæ¨èBGE-M3 Q4_K_Mæˆ–Qwen3-0.6B Q4_K_Mï¼Œé«˜æ€§ä»·æ¯”</span></li>
                    <li><strong data-i18n="conclusion.recommendation.point4.title">èµ„æºæåº¦å—é™ï¼ˆè¾¹ç¼˜éƒ¨ç½²ï¼‰ï¼š</strong> <span data-i18n="conclusion.recommendation.point4.desc">Qwen3-0.6B + Q4_K_M + GGUFï¼Œåœ¨å¯æ¥å—çš„æ€§èƒ½æŸå¤±ä¸‹å®ç°æœ€å°èµ„æºå ç”¨</span></li>
                    <li><strong data-i18n="conclusion.recommendation.point5.title">æ€§èƒ½åŸºå‡†æµ‹è¯•ä¸è¯„ä¼°ï¼š</strong> <span data-i18n="conclusion.recommendation.point5.desc">åœ¨é€‰æ‹©GGUFæ–¹æ¡ˆå‰ï¼ŒåŠ¡å¿…åœ¨ç›®æ ‡æ–‡æœ¬é•¿åº¦èŒƒå›´å†…è¿›è¡Œå……åˆ†æµ‹è¯•ï¼Œç‰¹åˆ«å…³æ³¨é•¿æ–‡æœ¬æ€§èƒ½æŸå¤±</span></li>
                </ol>
        
        <p><strong data-i18n="conclusion.recommendation.suggestion.title">æˆ˜ç•¥å»ºè®®ï¼š</strong> <span data-i18n="conclusion.recommendation.suggestion.desc">Multilingual-E5-Large + Q4_K_M çš„ç»„åˆé‡æ–°å®šä¹‰äº†é‡åŒ–éƒ¨ç½²çš„æ ‡å‡†ã€‚åœ¨3.9%çš„å¾®å°æ€§èƒ½ä»£ä»·ä¸‹å¯å®ç°æ˜¾å­˜èŠ‚çœï¼Œè¿™ä¸€çªç ´æ€§ç»“æœä½¿å¾—å¤§è§„æ¨¡ã€ä½æˆæœ¬çš„å‘é‡æ¨¡å‹éƒ¨ç½²æˆä¸ºç°å®ã€‚å»ºè®®ä¼ä¸šä¼˜å…ˆé‡‡ç”¨æ­¤é…ç½®ä½œä¸ºæ ‡å‡†æ–¹æ¡ˆã€‚</span></p>
    </div>

    <div class="controls">
        <h3 data-i18n="controls.title">ğŸ” é‡åŒ–æ€§èƒ½å¯¹æ¯”å›¾è¡¨</h3>
        <p data-i18n="controls.description">é€‰æ‹©æ¨¡å‹å¯¹æ¯”ä¸åŒé‡åŒ–ç²¾åº¦ä¸‹çš„æ€§èƒ½å˜åŒ–ï¼š</p>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
            <div class="control-group">
                <label for="modelSelect" data-i18n="controls.model.label">æ¨¡å‹ç³»åˆ—:</label>
                <select id="modelSelect">
                    <option value="" data-i18n="controls.model.placeholder">é€‰æ‹©æ¨¡å‹ç³»åˆ—</option>
                    <option value="multilingual-e5-large">Multilingual-E5-Large</option>
                    <option value="bge-m3">BGE-M3</option>
                    <option value="qwen3-0.6b">Qwen3-Embedding-0.6B</option>
                    <option value="qwen3-4b">Qwen3-Embedding-4B</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="contextRangeSelect" data-i18n="controls.range.label">æ–‡æœ¬é•¿åº¦èŒƒå›´:</label>
                <select id="contextRangeSelect">
                    <option value="short" data-i18n="controls.range.short">çŸ­æ–‡æœ¬ (256-512)</option>
                    <option value="medium" data-i18n="controls.range.medium">ä¸­ç­‰é•¿åº¦æ–‡æœ¬ (1K-4K)</option>
                    <option value="long" data-i18n="controls.range.long">é•¿æ–‡æœ¬ (8K-32K)</option>
                </select>
            </div>
        </div>
        
        <div style="display: flex; gap: 1rem; margin-top: 1rem; flex-wrap: wrap;">
            <button onclick="showComparison()" style="padding: 0.75rem 1.5rem; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1rem;" data-i18n="controls.show.button">
                æ˜¾ç¤ºå¯¹æ¯”å›¾è¡¨
            </button>
            <button onclick="clearChart()" style="padding: 0.75rem 1.5rem; background: #dc3545; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 1rem;" data-i18n="controls.clear.button">
                æ¸…ç©ºå›¾è¡¨
            </button>
        </div>
        
        <div id="chartLegend" style="margin-top: 1rem; font-size: 0.9rem; line-height: 1.4;"></div>
    </div>

    <div id="detailResults" class="detail-results" style="display: block;">
        <h3 data-i18n="details.title">é‡åŒ–æ€§èƒ½å¯¹æ¯”å›¾è¡¨</h3>
        <div style="margin-bottom: 1rem;">
            <label data-i18n="chart.task.label">ä»»åŠ¡:</label>
            <select id="taskSelect" style="margin-left: 0.5rem; padding: 0.25rem;">
                <option value="LEMBNeedleRetrieval">LEMBNeedleRetrieval</option>
                <option value="LEMBPasskeyRetrieval">LEMBPasskeyRetrieval</option>
            </select>
        </div>
        <div style="position: relative; height: 500px;">
            <canvas id="performanceChart"></canvas>
        </div>
    </div>

    <script>
        // Language data for internationalization
        const i18nData = {
            en: {
                'page.title': 'Vector Model Quantization Performance Comparison Results',
                'page.subtitle': 'Evaluating the impact of different quantization techniques on vector embedding model performance',
                'dataset.title': 'Dataset & Evaluation Framework',
                'dataset.source.label': 'Dataset Source:',
                'dataset.source.desc': 'Based on',
                'dataset.source.desc2': 'dataset for long-text vector embedding performance evaluation',
                'evaluation.script.label': 'Evaluation Script:',
                'evaluation.script.desc': 'Adapted from original',
                'evaluation.script.desc2': 'framework with OpenAI-compatible interface support.',
                'evaluation.script.link': 'View adapted evaluation script',
                'model.format.label': 'Model Format:',
                'model.format.desc': 'Includes both native HuggingFace format (vLLM runtime) and GGUF quantized format (ollama runtime), providing comprehensive model performance benchmarks',
                'summary.title': 'ğŸ“Š Quantization Performance Summary',
                'summary.description': 'This study compares the performance of major vector embedding models under different quantization precisions, covering BGE-M3, Qwen3-Embedding, and Multilingual-E5-Large model families.',
                'summary.metrics.label': 'Evaluation Metrics:',
                'summary.metrics.description': 'Using ndcg_at_10 metric to measure model performance on LEMBNeedleRetrieval and LEMBPasskeyRetrieval tasks.',
                'highlight.title': 'Key Findings: Real Impact of Technology Stack Combinations on Performance',
                'highlight.finding1': 'âš ï¸ Major Discovery - GGUF Tech Stack vs HF+vLLM Tech Stack Performance Gap:',
                'highlight.finding1.desc': 'GGUF format+Ollama shows significant performance degradation compared to HF format+vLLM combination in medium and long text scenarios',
                'highlight.finding2': '2. GGUF Internal Quantization Technology Relatively Stable:',
                'highlight.finding2.desc': 'Quantization operations within GGUF format have controllable impact',
                'highlight.finding3': '3. Model Architecture Shows Significant Differential Performance:',
                'highlight.finding3.desc': 'Different models show significant differences in performance gap between the two technology stacks',
                'highlight.finding4': '4. Long Text Processing is Key Technology Stack Selection Factor:',
                'highlight.finding4.desc': 'GGUF technology stack shows systematic disadvantage in long text retrieval scenarios',
                'highlight.range.short': 'Short Text Impact:',
                'highlight.range.medium': 'Medium Length Text Loss:',
                'highlight.range.long': 'Long Text Critical Loss:',
                'controls.title': 'ğŸ” Quantization Performance Comparison Chart',
                'controls.description': 'Select model to compare performance changes under different quantization precisions:',
                'controls.model.label': 'Model Family:',
                'controls.model.placeholder': 'Select model family',
                'controls.range.label': 'Context Length Range:',
                'controls.range.short': 'Short Text (256-512)',
                'controls.range.medium': 'Medium Length Text (1K-4K)',
                'controls.range.long': 'Long Text (8K-32K)',
                'controls.show.button': 'Show Comparison Chart',
                'controls.clear.button': 'Clear Chart',
                'details.title': 'Quantization Performance Comparison Chart',
                'chart.task.label': 'Task:',
                'conclusion.title': 'ğŸ¯ Technology Stack Performance Comparison: Critical Deployment Decision Guide',
                'conclusion.breakthrough.title': 'âš ï¸ Core Discovery: GGUF Tech Stack vs HF+vLLM Tech Stack Performance Gap',
                'conclusion.breakthrough.description': 'Critical finding from comprehensive testing: <strong>GGUF+Ollama technology stack shows 50%-90% performance loss compared to HF+vLLM in long text scenarios</strong>, while quantization within GGUF format has controllable impact. The key decision is technology stack choice, not quantization level. This fundamentally changes deployment strategy priorities.',
                'conclusion.differences.title': 'Technology Stack Performance vs Quantization: Impact Comparison Analysis',
                'conclusion.differences.intro': 'Distinguishing between technology stack differences and quantization impact - the critical technical insights:',
                'conclusion.differences.point1.title': 'Technology Stack Primary Impact (GGUF+Ollama vs HF+vLLM):',
                'conclusion.differences.point1.desc': 'Long text 50%-90% loss, medium text varies by model (0.9%-61.2%), short text minimal impact or improvement',
                'conclusion.differences.point2.title': 'GGUF Internal Quantization Secondary Impact (F16â†’Q8_0â†’Q4_K_M):',
                'conclusion.differences.point2.desc': 'Within GGUF format, quantization impact controllable: Q8_0 minimal loss, Q4_K_M acceptable degradation in most cases',
                'conclusion.differences.point3.title': 'Model Architecture Adaptability Ranking:',
                'conclusion.differences.point3.desc': 'Technology stack adaptability: Qwen3-4B (medium text) > Qwen3-0.6B > Multilingual-E5-Large (long text vulnerable)',
                'conclusion.effectiveness.title': 'Technology Stack Selection Decision Matrix',
                'conclusion.effectiveness.intro': 'Based on real impact of technology stack differences and quantization technology, establish application scenario-oriented technology stack selection standards:',
                'conclusion.effectiveness.point1.title': 'ğŸ¯ Long Text Applications (8K-32K) - Mandatory HF Native:',
                'conclusion.effectiveness.point1.desc': 'GGUF format has 50%-90% performance loss in long text scenarios, unacceptable. Must use HF+vLLM technology stack',
                'conclusion.effectiveness.point2.title': 'âš–ï¸ Medium Text Applications (1K-4K) - Need Trade-off Choice:',
                'conclusion.effectiveness.point2.desc': 'Qwen3 series has controllable loss in GGUF conversion (0.9%-3.3%), Multilingual-E5-Large has larger loss (61.2%). Suggest Qwen3 can use GGUF, E5-Large keep HF',
                'conclusion.effectiveness.point3.title': 'âœ… Short Text Applications (256-512) - GGUF Friendly:',
                'conclusion.effectiveness.point3.desc': 'All models have lossless or even improved GGUF conversion in short text scenarios, can confidently use GGUF+quantization technology stack',
                'conclusion.effectiveness.point4.title': 'ğŸ”§ GGUF Internal Quantization Strategy Optimization:',
                'conclusion.effectiveness.point4.desc': 'In scenarios determined to use GGUF, F16â†’Q8_0â†’Q4_K_M quantization chain has controllable impact, can choose quantization level based on resource needs',
                'conclusion.recommendation.title': 'Application Scenario-Based Deployment Decision Guide',
                'conclusion.recommendation.stance': 'Technology stack choice is more critical than quantization level',
                'conclusion.recommendation.intro': ':',
                'conclusion.recommendation.point1.title': 'Long Text Retrieval Systems (RAG/Document Analysis):',
                'conclusion.recommendation.point1.desc': 'Mandatory HF+vLLM, recommend Multilingual-E5-Large FP32 or Qwen3-4B BF16, ensure long text retrieval capability',
                'conclusion.recommendation.point2.title': 'Mixed Length Applications (Search/Recommendation):',
                'conclusion.recommendation.point2.desc': 'HF+vLLM priority, if resource constrained consider Qwen3 series+GGUF F16, avoid E5-Large to GGUF',
                'conclusion.recommendation.point3.title': 'Short Text Intensive (Classification/Matching):',
                'conclusion.recommendation.point3.desc': 'GGUF technology stack fully applicable, recommend BGE-M3 Q4_K_M or Qwen3-0.6B Q4_K_M, high cost-performance',
                'conclusion.recommendation.point4.title': 'Extremely Resource Constrained (Edge Deployment):',
                'conclusion.recommendation.point4.desc': 'Qwen3-0.6B + Q4_K_M + GGUF, achieve minimum resource usage with acceptable performance loss',
                'conclusion.recommendation.point5.title': 'Performance Baseline Testing and Evaluation:',
                'conclusion.recommendation.point5.desc': 'Before choosing GGUF solution, must conduct thorough testing within target text length ranges, particularly focusing on long text performance loss',
                'conclusion.recommendation.suggestion.title': 'Critical Strategic Insight:',
                'conclusion.recommendation.suggestion.desc': 'Technology stack performance gap (GGUF+Ollama vs HF+vLLM) far exceeds quantization impact. Long text applications must prioritize HF+vLLM over GGUF technology stack. The key decision is technology stack choice, not quantization level. For applications requiring long text capability, no amount of memory savings justifies 50%-90% performance loss.',
                'model.fp16': 'FP16(GGUF_OLLAMA)',
                'model.f16': 'F16(GGUF_OLLAMA)',
                'model.f32': 'F32(GGUF_OLLAMA)',
                'model.fp32_vllm': 'FP32(HF_vLLM)',
                'model.bf16_vllm': 'BF16(HF_vLLM)',
                'model.q8_0': 'Q8_0(GGUF_OLLAMA)',
                'model.q4_k_m': 'Q4_K_M(GGUF_OLLAMA)',
                'vs': 'vs',
                'needle.task': 'Needle Task',
                'passkey.task': 'Passkey Task',
                'performance.better': 'Better',
                'performance.worse': 'Worse', 
                'performance.similar': 'Similar',
                'quantization.impact': 'Quantization Impact',
                'loading.text': 'Loading test results...',
                'model.data.missing': 'Data Missing'
            },
            zh: {
                'page.title': 'å‘é‡æ¨¡å‹é‡åŒ–æ€§èƒ½å¯¹æ¯”æµ‹è¯•ç»“æœ',
                'page.subtitle': 'è¯„ä¼°ä¸åŒé‡åŒ–æŠ€æœ¯å¯¹å‘é‡åµŒå…¥æ¨¡å‹æ€§èƒ½çš„å½±å“',
                'dataset.title': 'æ•°æ®é›†ä¸è¯„ä¼°æ¡†æ¶',
                'dataset.source.label': 'æ•°æ®é›†æ¥æºï¼š',
                'dataset.source.desc': 'åŸºäº',
                'dataset.source.desc2': 'æ•°æ®é›†è¿›è¡Œé•¿æ–‡æœ¬å‘é‡åµŒå…¥æ€§èƒ½è¯„ä¼°',
                'evaluation.script.label': 'è¯„ä¼°è„šæœ¬ï¼š',
                'evaluation.script.desc': 'åŸºäºåŸå§‹',
                'evaluation.script.desc2': 'æ¡†æ¶è¿›è¡Œè°ƒæ•´ï¼Œæ”¯æŒOpenAIå…¼å®¹æ¥å£ã€‚',
                'evaluation.script.link': 'æŸ¥çœ‹è°ƒæ•´åçš„è¯„ä¼°è„šæœ¬',
                'model.format.label': 'æ¨¡å‹æ ¼å¼ï¼š',
                'model.format.desc': 'åŒ…å«åŸç”ŸHuggingFaceæ ¼å¼(vLLMè¿è¡Œ)å’ŒGGUFé‡åŒ–æ ¼å¼(ollamaè¿è¡Œ)ä¸¤ç§ç±»å‹ï¼Œæä¾›å®Œæ•´çš„æ¨¡å‹æ€§èƒ½åŸºå‡†å¯¹æ¯”',
                'summary.title': 'ğŸ“Š é‡åŒ–æ€§èƒ½å¯¹æ¯”æ±‡æ€»',
                'summary.description': 'æœ¬ç ”ç©¶å¯¹æ¯”äº†å¤šä¸ªä¸»æµå‘é‡åµŒå…¥æ¨¡å‹åœ¨ä¸åŒé‡åŒ–ç²¾åº¦ä¸‹çš„æ€§èƒ½è¡¨ç°ï¼Œæ¶µç›–BGE-M3ã€Qwen3-Embeddingå’ŒMultilingual-E5-Largeä¸‰å¤§ç³»åˆ—æ¨¡å‹ã€‚',
                'summary.metrics.label': 'è¯„ä¼°æŒ‡æ ‡ï¼š',
                'summary.metrics.description': 'ä½¿ç”¨ ndcg_at_10 æŒ‡æ ‡è¡¡é‡æ¨¡å‹æ€§èƒ½ï¼Œåˆ†åˆ«åœ¨ LEMBNeedleRetrieval å’Œ LEMBPasskeyRetrieval ä»»åŠ¡ä¸Šè¿›è¡Œæµ‹è¯•ã€‚',
                'highlight.title': 'å…³é”®å‘ç°ï¼šé‡åŒ–æŠ€æœ¯çš„å®é™…å½±å“',
                'highlight.finding1': '1. Multilingual-E5-Largeé‡åŒ–è¡¨ç°å“è¶Šï¼š',
                'highlight.finding1.desc': 'ä»F32åˆ°Q4_K_Må…¨é‡åŒ–çº§åˆ«éƒ½ä¿æŒä¼˜å¼‚æ€§èƒ½',
                'highlight.finding2': '2. BGE-M3å®Œæ•´é‡åŒ–é“¾è·¯è¡¨ç°å‡è¡¡ï¼š',
                'highlight.finding2.desc': 'Q8_0ä½œä¸ºä¸­é—´é‡åŒ–çº§åˆ«å±•ç°å‡ºè‰²ç¨³å®šæ€§',
                'highlight.finding3': '3. Qwen3-0.6Bé‡åŒ–ç­–ç•¥ç²¾ç»†åŒ–ï¼š',
                'highlight.finding3.desc': 'å°æ¨¡å‹åœ¨é‡åŒ–æ–¹é¢è¡¨ç°å‡ºæ„å¤–çš„éŸ§æ€§',
                'highlight.finding4': '4. é‡åŒ–æŠ€æœ¯å·²å®ç°ç”Ÿäº§çº§æˆç†Ÿåº¦ï¼š',
                'highlight.finding4.desc': 'å®Œæ•´é‡åŒ–é“¾è·¯æµ‹è¯•è¯å®å¤šçº§é‡åŒ–ç­–ç•¥çš„å¯è¡Œæ€§',
                'highlight.range.short': 'çŸ­æ–‡æœ¬:',
                'highlight.range.medium': 'ä¸­ç­‰é•¿åº¦æ–‡æœ¬:',
                'highlight.range.long': 'é•¿æ–‡æœ¬:',
                'controls.title': 'ğŸ” é‡åŒ–æ€§èƒ½å¯¹æ¯”å›¾è¡¨',
                'controls.description': 'é€‰æ‹©æ¨¡å‹å¯¹æ¯”ä¸åŒé‡åŒ–ç²¾åº¦ä¸‹çš„æ€§èƒ½å˜åŒ–ï¼š',
                'controls.model.label': 'æ¨¡å‹ç³»åˆ—:',
                'controls.model.placeholder': 'é€‰æ‹©æ¨¡å‹ç³»åˆ—',
                'controls.range.label': 'æ–‡æœ¬é•¿åº¦èŒƒå›´:',
                'controls.range.short': 'çŸ­æ–‡æœ¬ (256-512)',
                'controls.range.medium': 'ä¸­ç­‰é•¿åº¦æ–‡æœ¬ (1K-4K)',
                'controls.range.long': 'é•¿æ–‡æœ¬ (8K-32K)',
                'controls.show.button': 'æ˜¾ç¤ºå¯¹æ¯”å›¾è¡¨',
                'controls.clear.button': 'æ¸…ç©ºå›¾è¡¨',
                'details.title': 'é‡åŒ–æ€§èƒ½å¯¹æ¯”å›¾è¡¨',
                'chart.task.label': 'ä»»åŠ¡:',
                'conclusion.title': 'ğŸ¯ æŠ€æœ¯æ ˆæ€§èƒ½å¯¹æ¯”ï¼šå…³é”®éƒ¨ç½²å†³ç­–æŒ‡å—',
                'conclusion.breakthrough.title': 'âš ï¸ æ ¸å¿ƒå‘ç°ï¼šGGUFæŠ€æœ¯æ ˆvs HF+vLLMæŠ€æœ¯æ ˆæ€§èƒ½å·®è·',
                'conclusion.breakthrough.description': 'å…¨é¢æµ‹è¯•çš„å…³é”®å‘ç°ï¼š<strong>GGUF+OllamaæŠ€æœ¯æ ˆç›¸å¯¹äºHF+vLLMåœ¨é•¿æ–‡æœ¬åœºæ™¯ä¸‹å‡ºç°50%-90%æ€§èƒ½æŸå¤±</strong>ï¼Œè€ŒGGUFæ ¼å¼å†…éƒ¨çš„é‡åŒ–æŠ€æœ¯å½±å“å¯æ§ã€‚å…³é”®å†³ç­–æ˜¯æŠ€æœ¯æ ˆé€‰æ‹©ï¼Œè€Œéé‡åŒ–çº§åˆ«ã€‚è¿™ä»æ ¹æœ¬ä¸Šæ”¹å˜äº†éƒ¨ç½²ç­–ç•¥çš„ä¼˜å…ˆçº§ã€‚',
                'conclusion.differences.title': 'æŠ€æœ¯æ ˆæ€§èƒ½vsé‡åŒ–æŠ€æœ¯ï¼šå½±å“å¯¹æ¯”åˆ†æ',
                'conclusion.differences.intro': 'åŒºåˆ†æŠ€æœ¯æ ˆå·®å¼‚ä¸é‡åŒ–å½±å“çš„å…³é”®æŠ€æœ¯æ´å¯Ÿï¼š',
                'conclusion.differences.point1.title': 'æŠ€æœ¯æ ˆä¸»è¦å½±å“(GGUF+Ollama vs HF+vLLM)ï¼š',
                'conclusion.differences.point1.desc': 'é•¿æ–‡æœ¬æŸå¤±50%-90%ï¼Œä¸­ç­‰é•¿åº¦æ–‡æœ¬å› æ¨¡å‹è€Œå¼‚(0.9%-61.2%)ï¼ŒçŸ­æ–‡æœ¬å½±å“å¾®å°æˆ–æå‡',
                'conclusion.differences.point2.title': 'GGUFå†…éƒ¨é‡åŒ–æ¬¡è¦å½±å“(F16â†’Q8_0â†’Q4_K_M)ï¼š',
                'conclusion.differences.point2.desc': 'GGUFæ ¼å¼å†…éƒ¨ï¼Œé‡åŒ–å½±å“å¯æ§ï¼šQ8_0æŸå¤±å¾®å°ï¼ŒQ4_K_Måœ¨å¤šæ•°æƒ…å†µä¸‹é™çº§å¯æ¥å—',
                'conclusion.differences.point3.title': 'æ¨¡å‹æ¶æ„é€‚åº”æ€§æ’åºï¼š',
                'conclusion.differences.point3.desc': 'æŠ€æœ¯æ ˆé€‚åº”æ€§ï¼šQwen3-4B(ä¸­ç­‰é•¿åº¦æ–‡æœ¬) > Qwen3-0.6B > Multilingual-E5-Large(é•¿æ–‡æœ¬è„†å¼±)',
                'conclusion.effectiveness.title': 'æŠ€æœ¯æ ˆé€‰æ‹©å†³ç­–çŸ©é˜µ',
                'conclusion.effectiveness.intro': 'åŸºäºæŠ€æœ¯æ ˆå·®å¼‚ä¸é‡åŒ–æŠ€æœ¯çš„çœŸå®å½±å“ï¼Œå»ºç«‹åº”ç”¨åœºæ™¯å¯¼å‘çš„æŠ€æœ¯æ ˆé€‰æ‹©æ ‡å‡†ï¼š',
                'conclusion.effectiveness.point1.title': 'ğŸ¯ é•¿æ–‡æœ¬åº”ç”¨ï¼ˆ8K-32Kï¼‰- å¼ºåˆ¶HFåŸç”Ÿï¼š',
                'conclusion.effectiveness.point1.desc': 'GGUFæ ¼å¼åœ¨é•¿æ–‡æœ¬åœºæ™¯ä¸‹å­˜åœ¨50%-90%æ€§èƒ½æŸå¤±ï¼Œä¸å¯æ¥å—ã€‚å¿…é¡»ä½¿ç”¨HF+vLLMæŠ€æœ¯æ ˆ',
                'conclusion.effectiveness.point2.title': 'âš–ï¸ ä¸­ç­‰é•¿åº¦æ–‡æœ¬åº”ç”¨ï¼ˆ1K-4Kï¼‰- éœ€æƒè¡¡é€‰æ‹©ï¼š',
                'conclusion.effectiveness.point2.desc': 'Qwen3ç³»åˆ—åœ¨GGUFè½¬æ¢ä¸­æŸå¤±å¯æ§(0.9%-3.3%)ï¼ŒMultilingual-E5-LargeæŸå¤±è¾ƒå¤§(61.2%)ã€‚å»ºè®®Qwen3å¯ç”¨GGUFï¼ŒE5-Largeä¿æŒHF',
                'conclusion.effectiveness.point3.title': 'âœ… çŸ­æ–‡æœ¬åº”ç”¨ï¼ˆ256-512ï¼‰- GGUFå‹å¥½ï¼š',
                'conclusion.effectiveness.point3.desc': 'æ‰€æœ‰æ¨¡å‹åœ¨çŸ­æ–‡æœ¬åœºæ™¯ä¸‹GGUFè½¬æ¢æ— æŸç”šè‡³æå‡ï¼Œå¯æ”¾å¿ƒä½¿ç”¨GGUF+é‡åŒ–æŠ€æœ¯æ ˆ',
                'conclusion.effectiveness.point4.title': 'ğŸ”§ GGUFå†…éƒ¨é‡åŒ–ç­–ç•¥ä¼˜åŒ–ï¼š',
                'conclusion.effectiveness.point4.desc': 'åœ¨ç¡®å®šä½¿ç”¨GGUFçš„åœºæ™¯ä¸‹ï¼ŒF16â†’Q8_0â†’Q4_K_Mé‡åŒ–é“¾è·¯å½±å“å¯æ§ï¼Œå¯æ ¹æ®èµ„æºéœ€æ±‚é€‰æ‹©é‡åŒ–çº§åˆ«',
                'conclusion.recommendation.title': 'åŸºäºåº”ç”¨åœºæ™¯çš„éƒ¨ç½²å†³ç­–æŒ‡å—',
                'conclusion.recommendation.stance': 'æŠ€æœ¯æ ˆé€‰æ‹©æ¯”é‡åŒ–çº§åˆ«æ›´å…³é”®',
                'conclusion.recommendation.intro': 'ï¼š',
                'conclusion.recommendation.point1.title': 'é•¿æ–‡æœ¬æ£€ç´¢ç³»ç»Ÿï¼ˆRAG/æ–‡æ¡£åˆ†æï¼‰ï¼š',
                'conclusion.recommendation.point1.desc': 'å¼ºåˆ¶HF+vLLMï¼Œæ¨èMultilingual-E5-Large FP32æˆ–Qwen3-4B BF16ï¼Œç¡®ä¿é•¿æ–‡æœ¬æ£€ç´¢èƒ½åŠ›',
                'conclusion.recommendation.point2.title': 'æ··åˆé•¿åº¦åº”ç”¨ï¼ˆæœç´¢/æ¨èï¼‰ï¼š',
                'conclusion.recommendation.point2.desc': 'HF+vLLMä¼˜å…ˆï¼Œå¦‚èµ„æºå—é™å¯è€ƒè™‘Qwen3ç³»åˆ—+GGUF F16ï¼Œé¿å…E5-Largeè½¬GGUF',
                'conclusion.recommendation.point3.title': 'çŸ­æ–‡æœ¬å¯†é›†å‹ï¼ˆåˆ†ç±»/åŒ¹é…ï¼‰ï¼š',
                'conclusion.recommendation.point3.desc': 'GGUFæŠ€æœ¯æ ˆå®Œå…¨é€‚ç”¨ï¼Œæ¨èBGE-M3 Q4_K_Mæˆ–Qwen3-0.6B Q4_K_Mï¼Œé«˜æ€§ä»·æ¯”',
                'conclusion.recommendation.point4.title': 'èµ„æºæåº¦å—é™ï¼ˆè¾¹ç¼˜éƒ¨ç½²ï¼‰ï¼š',
                'conclusion.recommendation.point4.desc': 'Qwen3-0.6B + Q4_K_M + GGUFï¼Œåœ¨å¯æ¥å—çš„æ€§èƒ½æŸå¤±ä¸‹å®ç°æœ€å°èµ„æºå ç”¨',
                'conclusion.recommendation.point5.title': 'æ€§èƒ½åŸºå‡†æµ‹è¯•ä¸è¯„ä¼°ï¼š',
                'conclusion.recommendation.point5.desc': 'åœ¨é€‰æ‹©GGUFæ–¹æ¡ˆå‰ï¼ŒåŠ¡å¿…åœ¨ç›®æ ‡æ–‡æœ¬é•¿åº¦èŒƒå›´å†…è¿›è¡Œå……åˆ†æµ‹è¯•ï¼Œç‰¹åˆ«å…³æ³¨é•¿æ–‡æœ¬æ€§èƒ½æŸå¤±',
                'conclusion.recommendation.suggestion.title': 'å…³é”®æˆ˜ç•¥æ´å¯Ÿï¼š',
                'conclusion.recommendation.suggestion.desc': 'æŠ€æœ¯æ ˆæ€§èƒ½å·®è·(GGUF+Ollama vs HF+vLLM)çš„å½±å“è¿œè¶…é‡åŒ–æŠ€æœ¯çš„å½±å“ã€‚é•¿æ–‡æœ¬åº”ç”¨å¿…é¡»ä¼˜å…ˆé€‰æ‹©HF+vLLMè€ŒéGGUFæŠ€æœ¯æ ˆã€‚å…³é”®å†³ç­–æ˜¯æŠ€æœ¯æ ˆé€‰æ‹©ï¼Œè€Œéé‡åŒ–çº§åˆ«ã€‚å¯¹äºéœ€è¦é•¿æ–‡æœ¬èƒ½åŠ›çš„åº”ç”¨ï¼Œä»»ä½•æ˜¾å­˜èŠ‚çœéƒ½æ— æ³•æŠµæ¶ˆ50%-90%çš„æ€§èƒ½æŸå¤±ã€‚',
                'model.fp16': 'FP16(GGUF_OLLAMA)',
                'model.f16': 'F16(GGUF_OLLAMA)',
                'model.f32': 'F32(GGUF_OLLAMA)',
                'model.fp32_vllm': 'FP32(HF_vLLM)',
                'model.bf16_vllm': 'BF16(HF_vLLM)',
                'model.q8_0': 'Q8_0(GGUF_OLLAMA)',
                'model.q4_k_m': 'Q4_K_M(GGUF_OLLAMA)',
                'vs': 'å¯¹æ¯”',
                'needle.task': 'Needleä»»åŠ¡',
                'passkey.task': 'Passkeyä»»åŠ¡',
                'performance.better': 'æ›´å¥½',
                'performance.worse': 'æ›´å·®',
                'performance.similar': 'ç›¸è¿‘',
                'quantization.impact': 'é‡åŒ–å½±å“',
                'loading.text': 'æ­£åœ¨åŠ è½½æµ‹è¯•ç»“æœ...',
                'model.data.missing': 'æ•°æ®ç¼ºå¤±'
            }
        };

        // Current language (default to Chinese)
        let currentLanguage = 'zh';

        // Language switching function
        function switchLanguage(lang) {
            currentLanguage = lang;
            document.documentElement.lang = lang;
            document.title = i18nData[lang]['page.title'];
            
            // Update language buttons
            document.querySelectorAll('.language-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent === (lang === 'en' ? 'EN' : 'ä¸­æ–‡')) {
                    btn.classList.add('active');
                }
            });
            
            // Update all text elements with data-i18n attributes
            document.querySelectorAll('[data-i18n]').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (i18nData[lang][key]) {
                    element.innerHTML = i18nData[lang][key];
                }
            });
            
            // Reload model results to update dynamic content
            if (Object.keys(modelData).length > 0) {
                displayModelResults();
            }
        }

        // Helper function to get translated text
        function t(key) {
            return i18nData[currentLanguage][key] || key;
        }

        // Model configurations for quantization comparison (ollama directory)
        const modelConfigs = {
            'multilingual-e5-large': {
                name: 'Multilingual-E5-Large',
                versions: {
                    'FP32_vLLM': {
                        dirName: 'intfloat_multilingual-e5-large',
                        path: 'intfloat/multilingual-e5-large_None-0_openai_local',
                        isVLLM: true,
                        pooling: 'MEAN'
                    },
                    'F32': {
                        dirName: 'jeffh_intfloat-multilingual-e5-large_f32',
                        path: 'jeffh/intfloat-multilingual-e5-large:f32_None-0_openai_local'
                    },
                    'F16': {
                        dirName: 'jeffh_intfloat-multilingual-e5-large_f16',
                        path: 'jeffh/intfloat-multilingual-e5-large:f16_None-0_openai_local'
                    },
                    'Q8_0': {
                        dirName: 'jeffh_intfloat-multilingual-e5-large_q8_0',
                        path: 'jeffh/intfloat-multilingual-e5-large:q8_0_None-0_openai_local'
                    },
                    'Q4_K_M': {
                        dirName: 'qllama_multilingual-e5-large_q4_k_m',
                        path: 'qllama/multilingual-e5-large:q4_k_m_None-0_openai_local'
                    }
                }
            },
            'bge-m3': {
                name: 'BGE-M3',
                versions: {
                    'FP16': {
                        dirName: 'bge-m3_567m-fp16',
                        path: 'bge-m3:567m-fp16_None-0_openai_local'
                    },
                    'Q8_0': {
                        dirName: 'BAAI_bge-m3-GGUF_Q8_0',
                        path: 'BAAI/bge-m3-GGUF:Q8_0_None-0_openai_local'
                    },
                    'Q4_K_M': {
                        dirName: 'qllama_bge-m3_q4_k_m',
                        path: 'qllama/bge-m3:q4_k_m_None-0_openai_local'
                    }
                }
            },
            'qwen3-0.6b': {
                name: 'Qwen3-Embedding-0.6B',
                versions: {
                    'BF16_vLLM': {
                        dirName: 'Qwen_Qwen3-Embedding-0.6B',
                        path: 'Qwen/Qwen3-Embedding-0.6B_None-0_openai_local_pool_last',
                        isVLLM: true,
                        pooling: 'LAST'
                    },
                    'F16': {
                        dirName: 'hf-mirror.com_Qwen_Qwen3-Embedding-0.6B-GGUF_F16',
                        path: 'hf-mirror.com/Qwen/Qwen3-Embedding-0.6B-GGUF:F16_None-0_openai_local'
                    },
                    'Q8_0': {
                        dirName: 'hf-mirror.com_Qwen_Qwen3-Embedding-0.6B-GGUF_Q8_0',
                        path: 'hf-mirror.com/Qwen/Qwen3-Embedding-0.6B-GGUF:Q8_0_None-0_openai_local'
                    },
                    'Q4_K_M': {
                        dirName: 'hf-mirror.com_Qwen_Qwen3-Embedding-0.6B-GGUF_Q4_K_M',
                        path: 'hf-mirror.com/Qwen/Qwen3-Embedding-0.6B-GGUF:Q4_K_M_None-0_openai_local'
                    }
                }
            },
            'qwen3-4b': {
                name: 'Qwen3-Embedding-4B',
                versions: {
                    'BF16_vLLM': {
                        dirName: 'Qwen_Qwen3-Embedding-4B',
                        path: 'Qwen/Qwen3-Embedding-4B_None-0_openai_local_pool_last',
                        isVLLM: true,
                        pooling: 'LAST'
                    },
                    'F16': {
                        dirName: 'hf-mirror.com_Qwen_Qwen3-Embedding-4B-GGUF_F16',
                        path: 'hf-mirror.com/Qwen/Qwen3-Embedding-4B-GGUF:F16_None-0_openai_local'
                    },
                    'Q8_0': {
                        dirName: 'Qwen_Qwen3-Embedding-4B_Q8_0',
                        path: 'Qwen/Qwen3-Embedding-4B:Q8_0_None-0_openai_local'
                    },
                    'Q4_K_M': {
                        dirName: 'hf-mirror.com_Qwen_Qwen3-Embedding-4B-GGUF_Q4_K_M',
                        path: 'hf-mirror.com/Qwen/Qwen3-Embedding-4B-GGUF:Q4_K_M_None-0_openai_local'
                    }
                }
            }
        };

        // Global variable to store loaded model data
        let modelData = {};

        // Calculate context range averages
        function calculateContextRanges(data) {
            const contexts = ['256', '512', '1024', '2048', '4096', '8192', '16384', '32768'];
            
            // å®šä¹‰ä¸‰ä¸ªé•¿åº¦èŒƒå›´
            const shortRange = ['256', '512'];  // çŸ­æ–‡æœ¬
            const mediumRange = ['1024', '2048', '4096'];  // ä¸­ç­‰é•¿åº¦æ–‡æœ¬  
            const longRange = ['8192', '16384', '32768'];  // é•¿æ–‡æœ¬
            
            function calculateRangeAvg(task, range) {
                if (!data[task]) return 0;
                const values = range.map(ctx => data[task][ctx] || 0).filter(v => v > 0);
                return values.length > 0 ? values.reduce((a, b) => a + b, 0) / values.length : 0;
            }
            
            return {
                short: {
                    needle: calculateRangeAvg('LEMBNeedleRetrieval', shortRange),
                    passkey: calculateRangeAvg('LEMBPasskeyRetrieval', shortRange),
                    range: '256-512'
                },
                medium: {
                    needle: calculateRangeAvg('LEMBNeedleRetrieval', mediumRange),
                    passkey: calculateRangeAvg('LEMBPasskeyRetrieval', mediumRange),
                    range: '1K-4K'
                },
                long: {
                    needle: calculateRangeAvg('LEMBNeedleRetrieval', longRange),
                    passkey: calculateRangeAvg('LEMBPasskeyRetrieval', longRange),
                    range: '8K-32K'
                }
            };
        }

        // Load all model data from JSON files
        async function loadAllModelData() {
            const modelResultsDiv = document.getElementById('modelResults');
            modelResultsDiv.innerHTML = '<div class="loading">' + t('loading.text') + '</div>';

            // Load data for each model family
            for (const [modelKey, config] of Object.entries(modelConfigs)) {
                const loadedVersions = {};
                
                // Load data for each version of the model
                for (const [versionKey, versionConfig] of Object.entries(config.versions)) {
                    try {
                        // Determine the base path based on whether it's a vLLM version
                        let url;
                        if (versionConfig.isVLLM) {
                            // vLLMåŸç”Ÿæ ¼å¼è·¯å¾„
                            url = `results/vllm_original_length/${versionConfig.pooling}/${versionConfig.dirName}/${versionConfig.path}/overall_results.json`;
                        } else {
                            // GGUFé‡åŒ–æ ¼å¼è·¯å¾„ï¼ˆé€šè¿‡ollamaè¿è¡Œï¼‰
                            url = `results/ollama/${versionConfig.dirName}/${versionConfig.path}/overall_results.json`;
                        }
                        const response = await fetch(url);
                        
                        if (response.ok) {
                            const data = await response.json();
                            
                            // è®¡ç®—ä¸åŒé•¿åº¦èŒƒå›´çš„å¹³å‡å€¼
                            const contextRanges = calculateContextRanges(data);
                            
                            loadedVersions[versionKey] = {
                                needle: data.LEMBNeedleRetrieval?.avg || 0,
                                passkey: data.LEMBPasskeyRetrieval?.avg || 0,
                                contextRanges: contextRanges,
                                rawData: data
                            };
                        } else {
                            console.warn(`Failed to load ${url}`);
                            loadedVersions[versionKey] = {
                                needle: 0,
                                passkey: 0,
                                rawData: null
                            };
                        }
                    } catch (error) {
                        console.error(`Error loading data for ${modelKey} ${versionKey}:`, error);
                        loadedVersions[versionKey] = {
                            needle: 0,
                            passkey: 0,
                            rawData: null
                        };
                    }
                }
                
                modelData[modelKey] = {
                    name: config.name,
                    versions: loadedVersions
                };
            }
            
            // After all data is loaded, display the results
            displayModelResults();
        }

        // Display loaded model results
        function displayModelResults() {
            const modelResultsDiv = document.getElementById('modelResults');
            modelResultsDiv.innerHTML = '';

            for (const [modelKey, config] of Object.entries(modelData)) {
                const modelCard = document.createElement('div');
                modelCard.className = 'model-card';
                
                let cardHTML = `
                    <div class="model-title">
                        ${config.name}
                    </div>
                `;

                const versionKeys = Object.keys(config.versions);
                
                // Create comparisons between consecutive versions
                for (let i = 0; i < versionKeys.length - 1; i++) {
                    const version1 = versionKeys[i];
                    const version2 = versionKeys[i + 1];
                    const data1 = config.versions[version1];
                    const data2 = config.versions[version2];
                    
                    if (data1.rawData && data2.rawData && data1.contextRanges && data2.contextRanges) {
                        cardHTML += `
                            <div style="margin: 1rem 0; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                                <h5 style="margin: 0 0 1rem 0;">${t('model.' + version1.toLowerCase())} ${t('vs')} ${t('model.' + version2.toLowerCase())}</h5>
                        `;
                        
                        // æ˜¾ç¤ºä¸‰ä¸ªé•¿åº¦èŒƒå›´çš„å¯¹æ¯”
                        const ranges = ['short', 'medium', 'long'];
                        const rangeNames = {
                            'short': currentLanguage === 'zh' ? 'çŸ­æ–‡æœ¬ (256-512)' : 'Short Text (256-512)',
                            'medium': currentLanguage === 'zh' ? 'ä¸­ç­‰é•¿åº¦æ–‡æœ¬ (1K-4K)' : 'Medium Length Text (1K-4K)', 
                            'long': currentLanguage === 'zh' ? 'é•¿æ–‡æœ¬ (8K-32K)' : 'Long Text (8K-32K)'
                        };
                        
                        for (const range of ranges) {
                            const range1 = data1.contextRanges[range];
                            const range2 = data2.contextRanges[range];
                            
                            if (range1 && range2) {
                                // Calculate changes for this range
                                const needleChange = range1.needle > 0 ? ((range2.needle - range1.needle) / range1.needle * 100) : 0;
                                const passkeyChange = range1.passkey > 0 ? ((range2.passkey - range1.passkey) / range1.passkey * 100) : 0;
                                
                                const needleClass = Math.abs(needleChange) < 1 ? 'similar' : needleChange > 0 ? 'better' : 'worse';
                                const passkeyClass = Math.abs(passkeyChange) < 1 ? 'similar' : passkeyChange > 0 ? 'better' : 'worse';
                                
                                cardHTML += `
                                    <div style="margin: 0.5rem 0; padding: 0.5rem; background: white; border-radius: 6px; border-left: 3px solid #667eea;">
                                        <div style="font-weight: bold; margin-bottom: 0.3rem; color: #667eea;">${rangeNames[range]}</div>
                                        
                                        <div class="comparison-result ${needleClass}" style="margin: 0.2rem 0; padding: 0.3rem; font-size: 0.9rem;">
                                            <span>${t('needle.task')}</span>
                                            <span class="score">
                                                ${range1.needle.toFixed(3)} â†’ ${range2.needle.toFixed(3)} 
                                                (${needleChange > 0 ? '+' : ''}${needleChange.toFixed(1)}%)
                                            </span>
                                        </div>
                                        
                                        <div class="comparison-result ${passkeyClass}" style="margin: 0.2rem 0; padding: 0.3rem; font-size: 0.9rem;">
                                            <span>${t('passkey.task')}</span>
                                            <span class="score">
                                                ${range1.passkey.toFixed(3)} â†’ ${range2.passkey.toFixed(3)} 
                                                (${passkeyChange > 0 ? '+' : ''}${passkeyChange.toFixed(1)}%)
                                            </span>
                                        </div>
                                        
                                        <div style="text-align: center; margin-top: 0.2rem;">
                                            <span class="performance-impact ${getImpactClass(needleChange, passkeyChange)}" style="font-size: 0.8rem;">
                                                ${getImpactText(needleChange, passkeyChange)}
                                            </span>
                                        </div>
                                    </div>
                                `;
                            }
                        }
                        
                        cardHTML += `</div>`;
                    } else {
                        cardHTML += `
                            <div style="margin: 1rem 0; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                                <h5 style="margin: 0 0 0.5rem 0;">${t('model.' + version1.toLowerCase())} ${t('vs')} ${t('model.' + version2.toLowerCase())}</h5>
                                <div class="comparison-result" style="background-color: #f8d7da; border: 1px solid #f5c6cb;">
                                    <span>${t('model.data.missing')}</span>
                                </div>
                            </div>
                        `;
                    }
                }

                modelCard.innerHTML = cardHTML;
                modelResultsDiv.appendChild(modelCard);
            }
        }

        function getImpactClass(needleChange, passkeyChange) {
            // ç‰¹åˆ«å¤„ç†å®Œå…¨æ— å˜åŒ–çš„æƒ…å†µï¼ˆ0.0%ï¼‰
            if (Math.abs(needleChange) < 0.1 && Math.abs(passkeyChange) < 0.1) {
                return 'impact-none';
            }
            
            // è€ƒè™‘æœ€å¤§çš„è´Ÿé¢å½±å“ï¼Œå¦‚æœæœ‰ä»»ä½•ä¸€ä¸ªä»»åŠ¡ä¸¥é‡ä¸‹é™å°±æ ‡è®°ä¸ºç›¸åº”çº§åˆ«
            const maxNegativeChange = Math.max(
                needleChange < 0 ? Math.abs(needleChange) : 0,
                passkeyChange < 0 ? Math.abs(passkeyChange) : 0
            );
            
            // å¦‚æœæ²¡æœ‰è´Ÿé¢å½±å“ï¼Œåˆ™çœ‹æ•´ä½“å˜åŒ–å¹…åº¦
            if (maxNegativeChange === 0) {
                const avgChange = Math.abs((needleChange + passkeyChange) / 2);
                if (avgChange < 2) return 'impact-minimal';
                return 'impact-moderate';  // å³ä½¿æ˜¯æ­£å‘å˜åŒ–ï¼Œå¹…åº¦å¤§ä¹Ÿè¦æ ‡æ³¨
            }
            
            // æœ‰è´Ÿé¢å½±å“æ—¶ï¼ŒæŒ‰æœ€å¤§è´Ÿé¢å½±å“åˆ†çº§
            if (maxNegativeChange < 2) return 'impact-minimal';
            if (maxNegativeChange < 8) return 'impact-moderate';
            if (maxNegativeChange < 15) return 'impact-significant';
            return 'impact-severe';
        }

        function getImpactText(needleChange, passkeyChange) {
            const maxNegativeChange = Math.max(
                needleChange < 0 ? Math.abs(needleChange) : 0,
                passkeyChange < 0 ? Math.abs(passkeyChange) : 0
            );
            
            // ç‰¹åˆ«å¤„ç†å®Œå…¨æ— å˜åŒ–çš„æƒ…å†µï¼ˆ0.0%ï¼‰
            if (Math.abs(needleChange) < 0.1 && Math.abs(passkeyChange) < 0.1) {
                return currentLanguage === 'zh' ? 'æ— å½±å“' : 'No Impact';
            }
            
            if (maxNegativeChange === 0) {
                const avgChange = Math.abs((needleChange + passkeyChange) / 2);
                if (avgChange < 2) return currentLanguage === 'zh' ? 'å¾®å°' : 'Minimal';
                return currentLanguage === 'zh' ? 'è½»å¾®' : 'Light';
            }
            
            if (maxNegativeChange < 2) return currentLanguage === 'zh' ? 'å¾®å°' : 'Minimal';
            if (maxNegativeChange < 8) return currentLanguage === 'zh' ? 'è½»å¾®' : 'Light';
            if (maxNegativeChange < 15) return currentLanguage === 'zh' ? 'ä¸­ç­‰' : 'Moderate';
            return currentLanguage === 'zh' ? 'æ˜¾è‘—' : 'Significant';
        }

        // Chart instance
        let performanceChart = null;
        
        // Initialize chart
        function initChart() {
            const ctx = document.getElementById('performanceChart').getContext('2d');
            performanceChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: [],
                    datasets: []
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Model Quantization Performance Comparison'
                        },
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    },
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Model Versions'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'ndcg_at_10 Score'
                            },
                            min: 0,
                            max: 1
                        }
                    }
                }
            });
        }

        // Show comparison chart
        function showComparison() {
            const modelKey = document.getElementById('modelSelect').value;
            const task = document.getElementById('taskSelect').value;
            const contextRange = document.getElementById('contextRangeSelect').value;
            
            if (!modelKey) {
                alert(currentLanguage === 'zh' ? 'è¯·é€‰æ‹©æ¨¡å‹ç³»åˆ—' : 'Please select a model family');
                return;
            }
            
            if (!modelData[modelKey]) {
                alert(currentLanguage === 'zh' ? 'æ¨¡å‹æ•°æ®æœªåŠ è½½' : 'Model data not loaded');
                return;
            }
            
            const config = modelData[modelKey];
            const labels = Object.keys(config.versions);
            
            // è·å–æŒ‡å®šé•¿åº¦èŒƒå›´çš„æ•°æ®
            const data = labels.map(label => {
                const versionData = config.versions[label];
                if (versionData.contextRanges && versionData.contextRanges[contextRange]) {
                    const rangeData = versionData.contextRanges[contextRange];
                    return task === 'LEMBNeedleRetrieval' ? rangeData.needle : rangeData.passkey;
                }
                return 0;
            });
            
            // Generate colors
            const colors = ['#667eea', '#f093fb', '#4facfe', '#43e97b'];
            
            const rangeNames = {
                'short': currentLanguage === 'zh' ? 'çŸ­æ–‡æœ¬ (256-512)' : 'Short Text (256-512)',
                'medium': currentLanguage === 'zh' ? 'ä¸­ç­‰é•¿åº¦æ–‡æœ¬ (1K-4K)' : 'Medium Length Text (1K-4K)', 
                'long': currentLanguage === 'zh' ? 'é•¿æ–‡æœ¬ (8K-32K)' : 'Long Text (8K-32K)'
            };
            
            performanceChart.data.labels = labels;
            performanceChart.data.datasets = [{
                label: `${config.name} - ${task} (${rangeNames[contextRange]})`,
                data: data,
                backgroundColor: colors.slice(0, labels.length),
                borderColor: colors.slice(0, labels.length),
                borderWidth: 2
            }];
            
            performanceChart.options.plugins.title.text = `${config.name} ${currentLanguage === 'zh' ? 'é‡åŒ–æ€§èƒ½å¯¹æ¯”' : 'Quantization Performance Comparison'} - ${rangeNames[contextRange]}`;
            performanceChart.update();
            
            // Update legend
            updateChartLegend(config.name, labels, data, rangeNames[contextRange]);
        }
        
        // Clear chart
        function clearChart() {
            if (performanceChart) {
                performanceChart.data.datasets = [];
                performanceChart.data.labels = [];
                performanceChart.update();
            }
            updateChartLegend();
        }
        
        // Update chart legend
        function updateChartLegend(modelName = null, labels = [], data = [], contextRange = '') {
            const legendDiv = document.getElementById('chartLegend');
            if (!modelName) {
                legendDiv.innerHTML = `<em>${currentLanguage === 'zh' ? 'é€‰æ‹©æ¨¡å‹æŸ¥çœ‹å¯¹æ¯”ç»“æœ' : 'Select model to view comparison results'}</em>`;
            } else {
                const legendItems = labels.map((label, index) => {
                    return `<span style="color: #667eea; font-weight: bold;">â—</span> ${label}: ${data[index].toFixed(3)}`;
                }).join(' | ');
                const rangeText = contextRange ? ` - ${contextRange}` : '';
                legendDiv.innerHTML = `<strong>${currentLanguage === 'zh' ? 'å½“å‰æ˜¾ç¤º:' : 'Currently showing:'}</strong> ${modelName}${rangeText} | ${legendItems}`;
            }
        }

        // Page load initialization
        window.addEventListener('load', function() {
            // Initialize with Chinese language
            switchLanguage('zh');
            // Initialize chart
            initChart();
            // Initialize chart legend
            updateChartLegend();
            // Load model data from JSON files
            loadAllModelData();
        });
    </script>
</body>
</html> 